<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>DIn√≠cio</title>
<link rel="icon" href="https://cidadealta.gg/favicon.svg" type="image/svg+xml">
<link rel="stylesheet" href="../css/global.css">

<style>
/* ===== RESET ===== */
* { margin:0; padding:0; box-sizing:border-box; font-family:'Comfortaa', sans-serif; }
body { background:#0b0b0b; color:#fff; line-height:1.5; overflow-x:hidden; }
a { text-decoration:none; color:inherit; }

/* ===== HEADER ===== */
header.top {
  width:100%;
  padding:20px 40px;
  background:linear-gradient(90deg,#121212,#1a1a1a);
  display:flex;
  justify-content:space-between;
  align-items:center;
  border-bottom:1px solid #222;
  position:sticky;
  top:0;
  z-index:999;
}
header .logo {
  height:50px;
  cursor:pointer;
  transition:.3s;
}
header .logo:hover { transform:scale(1.05); }
header .user-mini {
  display:flex;
  align-items:center;
  gap:15px;
}
header .btn-small {
  background:#ffbb00;
  color:#000;
  border:none;
  padding:6px 12px;
  border-radius:8px;
  font-weight:700;
  cursor:pointer;
  transition:.3s;
}
header .btn-small:hover { opacity:.85; }

/* ===== MAIN WRAP ===== */
main.wrap {
  max-width:1400px;
  margin:40px auto;
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(300px,1fr));
  gap:30px;
  padding:0 20px;
}

/* ===== PANEL ===== */
section.panel {
  background:linear-gradient(145deg,#121212,#1a1a1a);
  border-radius:20px;
  padding:25px 30px;
  box-shadow:0 8px 25px rgba(0,0,0,0.6);
  transition:.3s;
}
section.panel:hover { transform:translateY(-3px); }

/* ===== PANEL TITLES ===== */
section.panel h2 {
  font-size:1.2rem;
  margin-bottom:20px;
  display:flex;
  align-items:center;
  gap:10px;
}

/* ===== RESUME ===== */
.resume {
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(120px,1fr));
  gap:20px;
  margin-bottom:20px;
}
.resume div {
  background:#151515;
  border-radius:12px;
  padding:15px;
  text-align:center;
  box-shadow:0 5px 15px rgba(0,0,0,0.5);
  transition:.3s;
}
.resume div:hover { transform:translateY(-3px) scale(1.02); }
.resume span { display:block; font-size:.75rem; opacity:.7; margin-bottom:5px; }
.resume strong { font-size:1rem; font-weight:700; }

/* ===== ACTIONS ===== */
.actions {
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(140px,1fr));
  gap:15px;
}
.action {
  background:#151515;
  padding:15px;
  text-align:center;
  border-radius:12px;
  font-weight:700;
  cursor:pointer;
  transition:.3s;
  box-shadow:0 5px 15px rgba(0,0,0,0.5);
}
.action:hover {
  transform:translateY(-4px) scale(1.03);
  background:#1c1c1c;
}

/* ADMIN CARD */
.action.admin {
  background:#ffbb00;
  color:#000;
}
.action.admin:hover {
  background:#f2a800;
}

/* ===== RESPONSIVO ===== */
@media(max-width:600px){
  main.wrap { grid-template-columns:1fr; }
  header.top { flex-direction:column; align-items:flex-start; gap:15px; }
  header .user-mini { justify-content:flex-start; }
}

/* ===== ANIMA√á√ïES ===== */
@keyframes fadeIn {
  from {opacity:0; transform:translateY(10px);}
  to {opacity:1; transform:translateY(0);}
}
section.panel, .action { animation:fadeIn 0.5s ease forwards; }

</style>
</head>
<body onload="checkAuth(); loadDashboard()">

<header class="top">
  <img src="https://cidadealta.gg/favicon.svg" onclick="go('../admin/painel.html')" class="logo" alt="Cidade Alta">
  <div class="user-mini">
    <span id="miniNome">Usu√°rio</span>
    <button class="btn-small" onclick="logout()">Sair</button>
  </div>
</header>

<main class="wrap">

  <!-- üîπ RESUMO PERFIL -->
  <section class="panel">
    <h2>üë§ Sua Conta</h2>
    <div class="resume">
      <div>
        <span>Nome</span>
        <strong id="nome">Carregando...</strong>
      </div>
      <div>
        <span>Cargo</span>
        <strong id="cargo">Carregando...</strong>
      </div>
      <div>
        <span>Fun√ß√£o</span>
        <strong id="funcao">Carregando...</strong>
      </div>
    </div>
    <button class="btn-small" onclick="go('perfil.html')">Ver perfil completo ‚Üí</button>
  </section>

  <!-- üîπ A√á√ïES R√ÅPIDAS -->
  <section class="panel">
    <h2>‚ö° A√ß√µes r√°pidas</h2>
    <div class="actions">
      <div class="action" onclick="go('../dashboard/feedback.html')">üìä Feedback</div>
      <div class="action" onclick="go('../dashboard/registro.html')">üìù Registrar Situa√ß√£o</div>
      <div class="action" onclick="go('../dashboard/indicacao.html')">‚≠ê Indicar Volunt√°rio</div>
      <div class="action admin" id="adminBtn" onclick="go('../admin/painel.html')">üõ†Ô∏è Administra√ß√£o</div>
    </div>
  </section>

</main>

<script>
// ===== AUTENTICA√á√ÉO =====
function getUser() {
  const email = localStorage.getItem('email');
  const usuarios = JSON.parse(localStorage.getItem('usuarios')) || [];
  return usuarios.find(u => u.email === email) || { nome:'Visitante', role:'User', funcao:'N/A' };
}

function checkAuth() {
  if(!localStorage.getItem('email')) location.href='./dashboard.html';
}

function logout() {
  localStorage.removeItem('email');
  location.href='./login.html';
}

function go(p) {
  location.href = p;
}

// ===== DASHBOARD =====
function loadDashboard(){
  const user = getUser();

  // Atualiza mini profile
  document.getElementById('miniNome').innerText = user.nome;
  document.getElementById('nome').innerText = user.nome;
  document.getElementById('cargo').innerText = user.role;
  document.getElementById('funcao').innerText = user.funcao;

  // Mostra bot√£o admin apenas se for CM ou Leader
  if(!['CM','Leader'].includes(user.role)){
    document.getElementById('adminBtn').style.display='none';
  }
}

// ===== ANIMA√á√ÉO DE CARREGAMENTO =====
window.addEventListener('load', ()=> {
  document.querySelectorAll('section.panel').forEach((el,i)=>{
    el.style.animationDelay = `${i*0.1}s`;
  });
});
</script>

</body>
</html>
