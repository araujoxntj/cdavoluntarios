<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>Dashboard â€¢ Cidade Alta</title>
<link rel="stylesheet" href="../css/global.css">
<script src="../js/auth.js"></script>
</head>

<body onload="checkAuth(); loadDashboard()">

<header class="top">
  <img src="https://cidadealta.gg/favicon.svg" onclick="go('../admin/painel.html')" class="logo" alt="Cidade Alta">
  <div class="user-mini">
    <span id="miniNome"></span>
    <button class="btn-small" onclick="logout()">Sair</button>
  </div>
</header>

<main class="wrap">

  <!-- ğŸ”¹ RESUMO PERFIL -->
  <section class="panel">
    <h2>ğŸ‘¤ Sua Conta</h2>

    <div class="resume">
      <div>
        <span>Nome</span>
        <strong id="nome"></strong>
      </div>
      <div>
        <span>Cargo</span>
        <strong id="cargo"></strong>
      </div>
      <div>
        <span>FunÃ§Ã£o</span>
        <strong id="funcao"></strong>
      </div>
    </div>

    <button class="btn-small" onclick="go('perfil.html')">
      Ver perfil completo â†’
    </button>
  </section>

  <!-- ğŸ”¹ ATALHOS -->
  <section class="panel">
    <h2>âš¡ AÃ§Ãµes rÃ¡pidas</h2>

    <div class="actions">
      <div class="action" onclick="go('../dashboard/feedback.html')">
        ğŸ“Š Feedback
      </div>

      <div class="action" onclick="go('../dashboard/registro.html')">
        ğŸ“ Registrar SituaÃ§Ã£o
      </div>

      <div class="action" onclick="go('../dashboard/indicacao.html')">
        â­ Indicar VoluntÃ¡rio
      </div>

      <div class="action admin" id="adminBtn"
           onclick="go('../admin/index.html')">
        ğŸ› ï¸ AdministraÃ§Ã£o
      </div>
    </div>
  </section>

</main>

<script>
function loadDashboard(){
  const user = getUser();

  document.getElementById('miniNome').innerText = user.nome;
  document.getElementById('nome').innerText = user.nome;
  document.getElementById('cargo').innerText = user.role;
  document.getElementById('funcao').innerText = user.funcao;

  // ğŸ” admin only
  if(!['CM','Leader'].includes(user.role)){
    document.getElementById('adminBtn').style.display = 'none';
  }
}

function go(p){
  location.href = p;
}
</script>

</body>
</html>
