<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>Seja Volunt√°rio ‚Ä¢ Cidade Alta</title>

<link href="https://fonts.googleapis.com/css2?family=Comfortaa:wght@300;400;700&display=swap" rel="stylesheet">

<style>
body{
  margin:0;
  font-family:'Comfortaa',sans-serif;
  background:#0c0c0c;
  color:#fff;
}

header{
  background:#151515;
  padding:1.4rem;
  text-align:center;
  border-bottom:1px solid #222;
}

main{
  max-width:820px;
  margin:40px auto;
  padding:0 20px;
}

.card{
  background:#1c1c1c;
  padding:2rem;
  border-radius:18px;
  box-shadow:0 0 25px rgba(0,0,0,.4);
}

.locked{
  opacity:.35;
  pointer-events:none;
}

input,select,textarea{
  width:100%;
  padding:12px;
  background:#111;
  border:1px solid #333;
  border-radius:12px;
  color:#fff;
  margin-bottom:1.2rem;
}

textarea{ min-height:150px }

button{
  background:#ffbb00;
  border:none;
  padding:14px 2.6rem;
  border-radius:14px;
  font-weight:700;
  cursor:pointer;
}

#alerta{
  background:#2a1f00;
  border:1px solid #ffbb00;
  padding:18px;
  border-radius:14px;
  margin-bottom:24px;
  text-align:center;
}
</style>
</head>

<body>

<header>
  <h2>Programa de Volunt√°rios</h2>
</header>

<main>

  <!-- ALERTA -->
  <div id="alerta">
    <h3>üö´ Inscri√ß√µes Encerradas</h3>
    <p>O processo seletivo est√° fechado.<br>
    Caso possua uma <b>senha de acesso</b>, informe abaixo.</p>

    <input id="senha" placeholder="Senha de acesso">
    <button onclick="desbloquear()">Desbloquear formul√°rio</button>
  </div>

  <!-- FORMUL√ÅRIO -->
  <div class="card locked" id="formCard">

    <label>Nome completo</label>
    <input id="nome">

    <label>Email</label>
    <input id="email">

    <label>Idade</label>
    <input id="idade" type="number">

    <label>Disponibilidade</label>
    <select id="tempo">
      <option>Manh√£</option>
      <option>Tarde</option>
      <option>Noite</option>
      <option>Integral</option>
    </select>

    <label>Por que deseja ser volunt√°rio?</label>
    <textarea id="motivo"></textarea>

    <button onclick="enviar()">Enviar Inscri√ß√£o</button>

  </div>

</main>

<script>
// üîí CONFIGURA√á√ÉO
const inscricoesAtivas = localStorage.getItem('inscricoes_ativas') !== 'false';
const SENHAS = JSON.parse(localStorage.getItem('senhas_unicas')) || [];

// üîì SE ABERTO
if(inscricoesAtivas){
  document.getElementById('alerta').style.display='none';
  document.getElementById('formCard').classList.remove('locked');
}

// üîë DESBLOQUEAR
function desbloquear(){
  const senhaDigitada = document.getElementById('senha').value.trim().toUpperCase();
  const agora = Date.now();

  const senhas = JSON.parse(localStorage.getItem('senhas_unicas')) || [];

  const senhaValida = senhas.find(s =>
    s.senha === senhaDigitada &&
    !s.usada &&
    agora < s.exp
  );

  if(!senhaValida){
    alert('Senha inv√°lida, expirada ou j√° utilizada.');
    return;
  }

  // marca como usada
  senhaValida.usada = true;
  localStorage.setItem('senhas_unicas', JSON.stringify(senhas));

  // libera formul√°rio
  document.getElementById('alerta').style.display = 'none';
  document.getElementById('formCard').classList.remove('locked');

  alert('Formul√°rio liberado com sucesso.');
}

// üì© ENVIO
function enviar(){
  const voluntario = {
    id: Date.now(),
    nome: nome.value,
    email: email.value,
    idade: idade.value,
    disponibilidade: tempo.value,
    motivo: motivo.value,
    status:'pendente',
    data: new Date().toISOString()
  };

  if(!voluntario.nome || !voluntario.email || !voluntario.motivo){
    alert('Preencha todos os campos.');
    return;
  }

  const vols = JSON.parse(localStorage.getItem('voluntarios')) || [];
  vols.push(voluntario);
  localStorage.setItem('voluntarios', JSON.stringify(vols));

  alert('Inscri√ß√£o enviada com sucesso!');
  location.href='obrigado.html';
}
</script>

</body>
</html>
